\section{Web application}
\label{sec-webapplication}

The developed web application consists of three main part: back-end (server side), front-end (client side) and tool 
for Geant4 tests configuration. The data flow between application components is shown on the Fig.~\ref{fig:dataflow}.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth,clip]{schema.png}
    \caption{Data flow between application components.}
    \label{fig:dataflow}
\end{figure}

The server is the core of the Geant4 validation system. It provides a web API allowing clients to access the database, responding to the clients requests and generates high quality plots "on the fly" using ROOT~\cite{ROOT} whenever they are requested. PostgreSQL is used as database management system and provided by CERN Database-On-Demand service.

The server is written in JavaScript and run under Node.js engine. Node.js has an event-driven architecture capable of asynchronous I/O. These design choices aim to optimize throughput and scalability in web applications with many input/output operations, as well as for real-time Web applications.

Database schema is designed in a way to allow storing scatter plots and histograms with unlimited number of parameters. Currently the application's database contains 86213 tests histograms/charts and 1414 experimental data ones.

To produce high quality plots ROOT~\cite{ROOT} based C++ utility is developed. It uses data in the application's JSON format (see Appendix~\ref{adx:JSON-format}) which has been introduces as main data interface between all parts of the application. The plotter utility is not deeply integrated in the server infrastructure and can be used as a standalone application if one wish to plot data locally. It supports scatter plots and 1D histograms with ability to plot on one canvas histograms with different binning and/or ratio plots. Plot axes ranges and scales are selected automatically, with ability to override them if necessary. User-defined styles (in ROOT terms) are also supported.

Client side application is an AngularJS single page application (SPA). 

%AngularJS is a JavaScript-based open-source front-end web application framework mainly maintained by Google and by a community of individuals and corporations to address many of the challenges encountered in developing single-page applications. The JavaScript components complement Apache Cordova, a framework used for developing cross-platform mobile apps. It aims to simplify both the development and the testing of such applications by providing a framework for client-side model–view–controller (MVC) and model–view–viewmodel (MVVM) architectures, along with components commonly used in rich Internet applications.

Website contains 4 pages:

\begin{itemize}
    \item User layouts
    \item Statistical comparison
    \item Experimental data
    \item Page to search values in application's database
\end{itemize}

"User layouts" page (see Fig.~\ref{fig:layouts}) is designed for visual comparison of set of plots. It is possible to compare different versions between them and against experimental data. Also users can write their own templates and use them on the layouts page. Each plot on the page can be displayed in static and interactive mode. If two or more Geant4 versions are selected, one can also enable plotting the ratio.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth,clip]{layouts.png}
    \caption{User layouts.}
    \label{fig:layouts}
\end{figure}

"Statistical comparison" page (see Fig.~\ref{fig:statcomparison}) allows performing statistical validation of Geant4 and experiments for given test. It displays pairs of plots for different versions with the same parameter values. For these pairs results of $\chi^2$ and Kolmogorov-Smirnov (KS) tests are displayed ($\chi^2/n.d.f.$, $\chi^2$ probability, KS and KS $\mathrm{Max(D)}$). All computations are performed on the client side in separate browser's processes using WebWorkers API. Implementation of $\chi^2$ and Kolmogorov-Smirnov tests is validated and gives the same results as ROOT framework.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth,clip]{statcomparison.png}
    \caption{Statistical comparison.}
    \label{fig:statcomparison}
\end{figure}

On the "experiment data" page (see Fig.~\ref{fig:exppage}) one can see summary table of experimental data available in the application's database.
"Lookup table" page contains all predefined values, such as project names, versions, observables, particles, etc.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth,clip]{expdata.png}
    \caption{Available experimental data.}
    \label{fig:exppage}
\end{figure}

Each plot in the application can be viewed in interactive mode using JSROOT~\cite{JSROOT}, which allows changing axes ranges, scales and styles of the data "on the fly" in the same way as it can be done in ROOT. It is possible to export the plots in PNG, ROOT or EPS format to use them in articles or reports. For testing purposes it also provides JSON and Gnuplot output.

In order to restrict access to Geant4 testing releases, the application uses user authorization based on CERN Single-Sign-On service.

%Don't forget to give each section, subsection, subsubsection, and
%paragraph a unique label (see Sect.~\ref{sec-1}).

%For one-column wide figures use syntax of figure~\ref{fig-1}
%\begin{figure}[h]
% Use the relevant command for your figure-insertion program
% to insert the figure file.
%\centering
%\includegraphics[width=1cm,clip]{tiger}
%\caption{Please write your figure caption here}
%\label{fig-1}       % Give a unique label
%\end{figure}

%For two-column wide figures use syntax of figure~\ref{fig-2}
%\begin{figure*}
%\centering
% Use the relevant command for your figure-insertion program
% to insert the figure file. See example above.
% If not, use
%\vspace*{5cm}       % Give the correct figure height in cm
%\caption{Please write your figure caption here}
%\label{fig-2}       % Give a unique label
%\end{figure*}

%For figure with sidecaption legend use syntax of figure
%\begin{figure}
% Use the relevant command for your figure-insertion program
% to insert the figure file.
%\centering
%\sidecaption
%\includegraphics[width=5cm,clip]{tiger}
%\caption{Please write your figure caption here}
%\label{fig-3}       % Give a unique label
%\end{figure}

%For tables use syntax in table~\ref{tab-1}.
%\begin{table}
%\centering
%\caption{Please write your table caption here}
%\label{tab-1}       % Give a unique label
% For LaTeX tables you can use
%\begin{tabular}{lll}
%\hline
%first & second & third  \\\hline
%number & number & number \\
%number & number & number \\\hline
%\end{tabular}
% Or use
%\vspace*{5cm}  % with the correct table height
%\end{table}